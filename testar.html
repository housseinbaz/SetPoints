
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Login.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <title>Login-Worksheet - CU</title>

    <script>
        window.onload = function() {
          var message = new SpeechSynthesisUtterance('Log in with your username and password correctly');
          
          // Specify the voice
          var voices = window.speechSynthesis.getVoices();
          message.voice = voices.find(voice => voice.name === "Google UK English Female");
          
          window.speechSynthesis.speak(message);
      };
    </script>
    <script src="https://apis.google.com/js/api.js"></script>

</head>

<body>

    <div class="box">
        <div class="box-logo">
            <img src="https://i.postimg.cc/0yCVZjpF/Logo-Arwan-2.png" alt="Home" />
        </div>
        <h2><span>A</span>rwan</h2>
        <form id="loginForm">
            <div class="inputBox">
                <input type="text" name="username" id="username" required>
                <label><i class="fa-solid fa-user-tie"></i> Username</label>
            </div>
            <div class="inputBox">
                <input type="password" name="password" id="password" required>
                <label><i class="fa-solid fa-key"></i> Password</label>
            </div>
            <button type="button" onclick="validateLogin()"><i class="fa-solid fa-arrow-right-to-bracket"></i> Login</button>
            <button type="button" onclick="openNewWindow()"><i class="fa-solid fa-house"></i> Home</button>
        </form>
    </div>

    <script>
         function validateLogin() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;

            // Basic validation
            if (!username || !password) {
                alert("Username and password are required");
            } else if (
                (username === "Houssein" && password === "Hbaz2000")
                // add other username and password checks here
            ) {
                // Capture the login time
                var loginTime = new Date().toLocaleTimeString();
                var loginDate = new Date().toLocaleDateString();

                // Call the logLogin function to log the login
                logLogin(username, loginDate, loginTime);

                // Display welcome message with username and time
                var welcomeMessage = "Welcome, " + username + "!\nLogin Time: " + loginTime;
                alert(welcomeMessage);

                // Redirect to another page
                window.open("BMS-Wfi-Worksheet.html", "_self");
            } else {
                alert("Incorrect username or password");
            }
        }

        function logLogin(username, date, time) {
            var xhr = new XMLHttpRequest();
            var url = "https://script.google.com/macros/s/AKfycbxR6nhssZrZwEMp9syNqf4tF9-5dUK3ZLaX7zyKPt5m6FV3WvUuOFpOn-eJhGdNfLnTnA/exec"; // Replace with your Google Apps Script URL
            var params = JSON.stringify({ username: username, date: date, time: time });

            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(params);
        }

        function openNewWindow() {
            window.location.href = 'Qr-WebPage.html';
        }
    </script>
</body>

</html>